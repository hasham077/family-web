<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Open Group Link</title>
</head>
<body>
  <h2>Join Group</h2>
  <p>If you have the app installed, it should open automatically. If not, you'll be redirected to the app store.</p>

  <script type="text/javascript">
    // Replace "yourapp" with your app's custom URL scheme and "com.example.yourapp" with your app's package name.
    const groupCode = "UCV2ZJ"; // Replace with dynamic group code as needed
    const appSchemeURL = `yourapp://join?groupCode=${groupCode}`;
    const playStoreURL = "https://play.google.com/store/apps/details?id=com.geniai.family.friends.tracker.location"; // Replace with your app's actual Play Store URL
    const appStoreURL = "https://apps.apple.com/app/id123456789"; // Replace with your app's actual App Store URL if applicable

    // Attempt to open the app using the custom URL scheme
    window.location.href = appSchemeURL;

    // Redirect to the Play Store (or App Store) after a delay if the app isnâ€™t installed
    setTimeout(() => {
      // Detect the platform and redirect to the appropriate store
       if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
        window.location.href = appStoreURL;
      } else {
        
        window.location.href = playStoreURL;
      
      }
    }, 1000); // Delay of 1 second (adjust if needed)
  </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Join Group in App</title>
</head>
<body>
  <h2>Join Our Group</h2>
  <p>If you have the app installed, it will open automatically. Otherwise, you will be redirected to download the app.</p>

  <script type="text/javascript">
    // Function to get query parameters from the URL
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Get the circle ID from the URL parameter
    const circleId = getQueryParam("circleid");

    // Construct the app scheme URL based on whether the circle ID is provided
    const appSchemeURL = circleId 
      ? `family-circle://join?circleid=${circleId}` 
      : "family-circle://";

    const playStoreURL = "https://play.google.com/store/apps/details?id=com.example.yourapp";
    const appStoreURL = "https://apps.apple.com/app/id123456789";

    // Attempt to open the app with or without the circle ID
    window.location.href = appSchemeURL;

    // Redirect to the app store after a short delay if the app is not installed
    setTimeout(() => {
      // Detect the platform and redirect to the appropriate store
      if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
        window.location.href = appStoreURL;
      } else {
        window.location.href = playStoreURL;
      }
    }, 1000); // Delay of 1 second (adjust if needed)
  </script>
</body>
</html>
